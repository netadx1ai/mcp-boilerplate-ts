ed7d3112d79e967436ade86d462e4650
"use strict";
/**
 * @fileoverview Basic Test Suite
 *
 * Basic tests to verify Jest ES modules configuration and core functionality
 * of the MCP TypeScript boilerplate ecosystem.
 *
 * @author MCP Boilerplate Team
 * @version 1.0.0
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// =============================================================================
// Basic Functionality Tests
// =============================================================================
(0, globals_1.describe)('Basic TypeScript and Jest Configuration', () => {
    (0, globals_1.test)('should support ES modules', () => {
        // Test that ES module imports work
        (0, globals_1.expect)(typeof globals_1.describe).toBe('function');
        (0, globals_1.expect)(typeof globals_1.test).toBe('function');
        (0, globals_1.expect)(typeof globals_1.expect).toBe('function');
    });
    (0, globals_1.test)('should support async/await', async () => {
        const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));
        const start = Date.now();
        await delay(10);
        const elapsed = Date.now() - start;
        (0, globals_1.expect)(elapsed).toBeGreaterThanOrEqual(8); // Allow for timing variance
    });
    (0, globals_1.test)('should support TypeScript types', () => {
        const testObject = {
            id: 1,
            name: 'test',
            active: true,
        };
        (0, globals_1.expect)(testObject.id).toBe(1);
        (0, globals_1.expect)(testObject.name).toBe('test');
        (0, globals_1.expect)(testObject.active).toBe(true);
    });
    (0, globals_1.test)('should handle JSON operations', () => {
        const testData = {
            server: 'mcp-boilerplate-ts',
            version: '1.0.0',
            tools: ['echo', 'calculator', 'health'],
        };
        const jsonString = JSON.stringify(testData);
        const parsed = JSON.parse(jsonString);
        (0, globals_1.expect)(parsed).toEqual(testData);
        (0, globals_1.expect)(parsed.tools).toHaveLength(3);
    });
});
// =============================================================================
// Utility Function Tests
// =============================================================================
(0, globals_1.describe)('Utility Functions', () => {
    (0, globals_1.test)('should generate unique IDs', () => {
        const generateId = () => `id_${Math.random().toString(36).substr(2, 9)}`;
        const id1 = generateId();
        const id2 = generateId();
        (0, globals_1.expect)(id1).not.toBe(id2);
        (0, globals_1.expect)(id1).toMatch(/^id_[a-z0-9]{9}$/);
        (0, globals_1.expect)(id2).toMatch(/^id_[a-z0-9]{9}$/);
    });
    (0, globals_1.test)('should handle error objects', () => {
        const createError = (message) => new Error(message);
        const error = createError('Test error');
        (0, globals_1.expect)(error).toBeInstanceOf(Error);
        (0, globals_1.expect)(error.message).toBe('Test error');
        (0, globals_1.expect)(error.stack).toBeDefined();
    });
    (0, globals_1.test)('should validate timestamps', () => {
        const now = new Date().toISOString();
        (0, globals_1.expect)(now).toMatch(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/);
        (0, globals_1.expect)(new Date(now)).toBeInstanceOf(Date);
    });
});
// =============================================================================
// Mock MCP Server Tests
// =============================================================================
(0, globals_1.describe)('Mock MCP Server Structure', () => {
    const mockTools = [
        {
            name: 'echo',
            description: 'Echo back a message',
            schema: { message: 'string' },
            handler: async ({ message }) => ({ result: message }),
        },
        {
            name: 'add',
            description: 'Add two numbers',
            schema: { a: 'number', b: 'number' },
            handler: async ({ a, b }) => ({ result: a + b }),
        },
    ];
    (0, globals_1.test)('should register and execute tools', async () => {
        const echoTool = mockTools.find(t => t.name === 'echo');
        const addTool = mockTools.find(t => t.name === 'add');
        (0, globals_1.expect)(echoTool).toBeDefined();
        (0, globals_1.expect)(addTool).toBeDefined();
        if (echoTool) {
            const echoResult = await echoTool.handler({ message: 'Hello' });
            (0, globals_1.expect)(echoResult.result).toBe('Hello');
        }
        if (addTool) {
            const addResult = await addTool.handler({ a: 5, b: 3 });
            (0, globals_1.expect)(addResult.result).toBe(8);
        }
    });
    (0, globals_1.test)('should handle tool errors gracefully', async () => {
        const errorTool = {
            name: 'error_test',
            description: 'Tool that throws an error',
            schema: {},
            handler: async () => {
                throw new Error('Intentional test error');
            },
        };
        let caughtError = null;
        try {
            await errorTool.handler({});
        }
        catch (error) {
            caughtError = error;
        }
        (0, globals_1.expect)(caughtError).toBeInstanceOf(Error);
        (0, globals_1.expect)(caughtError?.message).toBe('Intentional test error');
    });
});
// =============================================================================
// Performance Tests
// =============================================================================
(0, globals_1.describe)('Performance Tests', () => {
    (0, globals_1.test)('should execute quickly', async () => {
        const start = Date.now();
        // Simulate some work
        const data = Array.from({ length: 1000 }, (_, i) => ({ id: i, value: Math.random() }));
        const filtered = data.filter(item => item.value > 0.5);
        const mapped = filtered.map(item => ({ ...item, doubled: item.value * 2 }));
        const elapsed = Date.now() - start;
        (0, globals_1.expect)(elapsed).toBeLessThan(100); // Should be very fast
        (0, globals_1.expect)(mapped.length).toBeGreaterThan(0);
        (0, globals_1.expect)(mapped.length).toBeLessThanOrEqual(1000);
    });
    (0, globals_1.test)('should handle concurrent operations', async () => {
        const concurrentTasks = Array.from({ length: 10 }, async (_, i) => {
            await new Promise(resolve => setTimeout(resolve, Math.random() * 10));
            return `task-${i}`;
        });
        const start = Date.now();
        const results = await Promise.all(concurrentTasks);
        const elapsed = Date.now() - start;
        (0, globals_1.expect)(results).toHaveLength(10);
        (0, globals_1.expect)(elapsed).toBeLessThan(100); // Should complete quickly
        (0, globals_1.expect)(results).toEqual(globals_1.expect.arrayContaining([
            globals_1.expect.stringMatching(/^task-\d+$/)
        ]));
    });
});
// =============================================================================
// Integration Readiness Tests
// =============================================================================
(0, globals_1.describe)('Integration Readiness', () => {
    (0, globals_1.test)('should have required Node.js version', () => {
        const nodeVersion = process.version;
        const majorVersion = parseInt(nodeVersion.slice(1).split('.')[0]);
        (0, globals_1.expect)(majorVersion).toBeGreaterThanOrEqual(18);
    });
    (0, globals_1.test)('should support modern JavaScript features', () => {
        // Test optional chaining
        const obj = { a: { b: { c: 'value' } } };
        (0, globals_1.expect)(obj.a?.b?.c).toBe('value');
        (0, globals_1.expect)(obj.a?.b?.d).toBeUndefined();
        // Test nullish coalescing
        const nullValue = null;
        const undefinedValue = undefined;
        const zeroValue = 0;
        const emptyString = '';
        (0, globals_1.expect)(nullValue ?? 'default').toBe('default');
        (0, globals_1.expect)(undefinedValue ?? 'default').toBe('default');
        (0, globals_1.expect)(zeroValue ?? 'default').toBe(0);
        (0, globals_1.expect)(emptyString ?? 'default').toBe('');
    });
    (0, globals_1.test)('should support destructuring and spread', () => {
        const source = { a: 1, b: 2, c: 3 };
        const { a, ...rest } = source;
        (0, globals_1.expect)(a).toBe(1);
        (0, globals_1.expect)(rest).toEqual({ b: 2, c: 3 });
        const extended = { ...source, d: 4 };
        (0, globals_1.expect)(extended).toEqual({ a: 1, b: 2, c: 3, d: 4 });
    });
});
// =============================================================================
// Mock Server Response Tests
// =============================================================================
(0, globals_1.describe)('Mock Server Responses', () => {
    (0, globals_1.test)('should format MCP responses correctly', () => {
        const mockResponse = {
            content: [
                {
                    type: 'text',
                    text: 'Hello from MCP server',
                },
            ],
        };
        (0, globals_1.expect)(mockResponse.content).toHaveLength(1);
        (0, globals_1.expect)(mockResponse.content[0].type).toBe('text');
        (0, globals_1.expect)(mockResponse.content[0].text).toBe('Hello from MCP server');
    });
    (0, globals_1.test)('should handle error responses', () => {
        const mockErrorResponse = {
            content: [
                {
                    type: 'text',
                    text: 'An error occurred',
                },
            ],
            isError: true,
        };
        (0, globals_1.expect)(mockErrorResponse.isError).toBe(true);
        (0, globals_1.expect)(mockErrorResponse.content[0].text).toBe('An error occurred');
    });
    (0, globals_1.test)('should handle complex data responses', () => {
        const complexData = {
            users: [
                { id: 1, name: 'Alice', roles: ['admin'] },
                { id: 2, name: 'Bob', roles: ['user'] },
            ],
            pagination: {
                page: 1,
                total: 2,
                hasMore: false,
            },
        };
        const mockResponse = {
            content: [
                {
                    type: 'text',
                    text: JSON.stringify(complexData, null, 2),
                },
            ],
        };
        const parsedContent = JSON.parse(mockResponse.content[0].text);
        (0, globals_1.expect)(parsedContent.users).toHaveLength(2);
        (0, globals_1.expect)(parsedContent.users[0].name).toBe('Alice');
        (0, globals_1.expect)(parsedContent.pagination.total).toBe(2);
    });
});
// =============================================================================
// Environment and Configuration Tests
// =============================================================================
(0, globals_1.describe)('Environment Configuration', () => {
    const originalEnv = process.env;
    (0, globals_1.afterAll)(() => {
        process.env = originalEnv;
    });
    (0, globals_1.test)('should handle environment variables', () => {
        process.env.TEST_VAR = 'test_value';
        (0, globals_1.expect)(process.env.TEST_VAR).toBe('test_value');
        (0, globals_1.expect)(process.env.NONEXISTENT_VAR).toBeUndefined();
    });
    (0, globals_1.test)('should detect environment type', () => {
        // Test NODE_ENV detection
        process.env.NODE_ENV = 'test';
        (0, globals_1.expect)(process.env.NODE_ENV).toBe('test');
        const isDevelopment = process.env.NODE_ENV === 'development';
        const isProduction = process.env.NODE_ENV === 'production';
        const isTest = process.env.NODE_ENV === 'test';
        (0, globals_1.expect)(isDevelopment).toBe(false);
        (0, globals_1.expect)(isProduction).toBe(false);
        (0, globals_1.expect)(isTest).toBe(true);
    });
});
// =============================================================================
// Resource Management Tests
// =============================================================================
(0, globals_1.describe)('Resource Management', () => {
    (0, globals_1.test)('should manage memory efficiently', () => {
        const initialMemory = process.memoryUsage();
        // Create some data
        const largeArray = Array.from({ length: 10000 }, (_, i) => ({
            id: i,
            data: `item-${i}`,
            timestamp: new Date().toISOString(),
        }));
        (0, globals_1.expect)(largeArray).toHaveLength(10000);
        // Memory should not be excessive
        const currentMemory = process.memoryUsage();
        const heapDiff = currentMemory.heapUsed - initialMemory.heapUsed;
        // Should use less than 50MB for this test data
        (0, globals_1.expect)(heapDiff).toBeLessThan(50 * 1024 * 1024);
    });
    (0, globals_1.test)('should handle cleanup properly', () => {
        let cleanupCalled = false;
        const mockCleanup = () => {
            cleanupCalled = true;
        };
        // Simulate resource allocation and cleanup
        const resource = { cleanup: mockCleanup };
        resource.cleanup();
        (0, globals_1.expect)(cleanupCalled).toBe(true);
    });
});
// =============================================================================
// System Information Tests
// =============================================================================
(0, globals_1.describe)('System Information', () => {
    (0, globals_1.test)('should provide system details', () => {
        (0, globals_1.expect)(process.platform).toBeDefined();
        (0, globals_1.expect)(process.arch).toBeDefined();
        (0, globals_1.expect)(process.version).toMatch(/^v\d+\.\d+\.\d+/);
        (0, globals_1.expect)(process.uptime()).toBeGreaterThan(0);
    });
    (0, globals_1.test)('should track timing accurately', () => {
        const start = process.hrtime.bigint();
        // Small delay to ensure measurable time difference
        for (let i = 0; i < 1000; i++) {
            Math.random();
        }
        const end = process.hrtime.bigint();
        const duration = Number(end - start) / 1000000; // Convert to milliseconds
        (0, globals_1.expect)(duration).toBeGreaterThan(0);
        (0, globals_1.expect)(duration).toBeLessThan(100); // Should be very fast
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1ZvbHVtZXMvVDcyL1dvcmsyMDI1QUkvTUNQLUdlbmVydGljL21jcC1ib2lsZXJwbGF0ZS10cy90ZXN0cy9iYXNpYy50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7R0FRRzs7QUFFSCwyQ0FBNEU7QUFFNUUsZ0ZBQWdGO0FBQ2hGLDRCQUE0QjtBQUM1QixnRkFBZ0Y7QUFFaEYsSUFBQSxrQkFBUSxFQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtJQUN2RCxJQUFBLGNBQUksRUFBQywyQkFBMkIsRUFBRSxHQUFHLEVBQUU7UUFDckMsbUNBQW1DO1FBQ25DLElBQUEsZ0JBQU0sRUFBQyxPQUFPLGtCQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDekMsSUFBQSxnQkFBTSxFQUFDLE9BQU8sY0FBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3JDLElBQUEsZ0JBQU0sRUFBQyxPQUFPLGdCQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDekMsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGNBQUksRUFBQyw0QkFBNEIsRUFBRSxLQUFLLElBQUksRUFBRTtRQUM1QyxNQUFNLEtBQUssR0FBRyxDQUFDLEVBQVUsRUFBRSxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFOUUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUM7UUFFbkMsSUFBQSxnQkFBTSxFQUFDLE9BQU8sQ0FBQyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsNEJBQTRCO0lBQ3pFLENBQUMsQ0FBQyxDQUFDO0lBRUgs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QUFFLENBQUM7UUFFdEMsbURBQW1EO1FBQ25ELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUM5QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDaEIsQ0FBQztRQUVELE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDcEMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQywwQkFBMEI7UUFFMUUsSUFBQSxnQkFBTSxFQUFDLFFBQVEsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQyxJQUFBLGdCQUFNLEVBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsc0JBQXNCO0lBQzVELENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1ZvbHVtZXMvVDcyL1dvcmsyMDI1QUkvTUNQLUdlbmVydGljL21jcC1ib2lsZXJwbGF0ZS10cy90ZXN0cy9iYXNpYy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBCYXNpYyBUZXN0IFN1aXRlXG4gKiBcbiAqIEJhc2ljIHRlc3RzIHRvIHZlcmlmeSBKZXN0IEVTIG1vZHVsZXMgY29uZmlndXJhdGlvbiBhbmQgY29yZSBmdW5jdGlvbmFsaXR5XG4gKiBvZiB0aGUgTUNQIFR5cGVTY3JpcHQgYm9pbGVycGxhdGUgZWNvc3lzdGVtLlxuICogXG4gKiBAYXV0aG9yIE1DUCBCb2lsZXJwbGF0ZSBUZWFtXG4gKiBAdmVyc2lvbiAxLjAuMFxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCB0ZXN0LCBleHBlY3QsIGJlZm9yZUFsbCwgYWZ0ZXJBbGwgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEJhc2ljIEZ1bmN0aW9uYWxpdHkgVGVzdHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRlc2NyaWJlKCdCYXNpYyBUeXBlU2NyaXB0IGFuZCBKZXN0IENvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBzdXBwb3J0IEVTIG1vZHVsZXMnLCAoKSA9PiB7XG4gICAgLy8gVGVzdCB0aGF0IEVTIG1vZHVsZSBpbXBvcnRzIHdvcmtcbiAgICBleHBlY3QodHlwZW9mIGRlc2NyaWJlKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgdGVzdCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgICBleHBlY3QodHlwZW9mIGV4cGVjdCkudG9CZSgnZnVuY3Rpb24nKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIHN1cHBvcnQgYXN5bmMvYXdhaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZGVsYXkgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gICAgXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIGF3YWl0IGRlbGF5KDEwKTtcbiAgICBjb25zdCBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuICAgIFxuICAgIGV4cGVjdChlbGFwc2VkKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDgpOyAvLyBBbGxvdyBmb3IgdGltaW5nIHZhcmlhbmNlXG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBzdXBwb3J0IFR5cGVTY3JpcHQgdHlwZXMnLCAoKSA9PiB7XG4gICAgaW50ZXJmYWNlIFRlc3RJbnRlcmZhY2Uge1xuICAgICAgaWQ6IG51bWJlcjtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIGFjdGl2ZTogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBjb25zdCB0ZXN0T2JqZWN0OiBUZXN0SW50ZXJmYWNlID0ge1xuICAgICAgaWQ6IDEsXG4gICAgICBuYW1lOiAndGVzdCcsXG4gICAgICBhY3RpdmU6IHRydWUsXG4gICAgfTtcblxuICAgIGV4cGVjdCh0ZXN0T2JqZWN0LmlkKS50b0JlKDEpO1xuICAgIGV4cGVjdCh0ZXN0T2JqZWN0Lm5hbWUpLnRvQmUoJ3Rlc3QnKTtcbiAgICBleHBlY3QodGVzdE9iamVjdC5hY3RpdmUpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBoYW5kbGUgSlNPTiBvcGVyYXRpb25zJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlc3REYXRhID0ge1xuICAgICAgc2VydmVyOiAnbWNwLWJvaWxlcnBsYXRlLXRzJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICB0b29sczogWydlY2hvJywgJ2NhbGN1bGF0b3InLCAnaGVhbHRoJ10sXG4gICAgfTtcblxuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh0ZXN0RGF0YSk7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShqc29uU3RyaW5nKTtcblxuICAgIGV4cGVjdChwYXJzZWQpLnRvRXF1YWwodGVzdERhdGEpO1xuICAgIGV4cGVjdChwYXJzZWQudG9vbHMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgfSk7XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFV0aWxpdHkgRnVuY3Rpb24gVGVzdHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRlc2NyaWJlKCdVdGlsaXR5IEZ1bmN0aW9ucycsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGdlbmVyYXRlIHVuaXF1ZSBJRHMnLCAoKSA9PiB7XG4gICAgY29uc3QgZ2VuZXJhdGVJZCA9ICgpID0+IGBpZF8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuICAgIFxuICAgIGNvbnN0IGlkMSA9IGdlbmVyYXRlSWQoKTtcbiAgICBjb25zdCBpZDIgPSBnZW5lcmF0ZUlkKCk7XG4gICAgXG4gICAgZXhwZWN0KGlkMSkubm90LnRvQmUoaWQyKTtcbiAgICBleHBlY3QoaWQxKS50b01hdGNoKC9eaWRfW2EtejAtOV17OX0kLyk7XG4gICAgZXhwZWN0KGlkMikudG9NYXRjaCgvXmlkX1thLXowLTldezl9JC8pO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVycm9yIG9iamVjdHMnLCAoKSA9PiB7XG4gICAgY29uc3QgY3JlYXRlRXJyb3IgPSAobWVzc2FnZTogc3RyaW5nKSA9PiBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgXG4gICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvcignVGVzdCBlcnJvcicpO1xuICAgIFxuICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoRXJyb3IpO1xuICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0JlKCdUZXN0IGVycm9yJyk7XG4gICAgZXhwZWN0KGVycm9yLnN0YWNrKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgdGltZXN0YW1wcycsICgpID0+IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgXG4gICAgZXhwZWN0KG5vdykudG9NYXRjaCgvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9VFxcZHsyfTpcXGR7Mn06XFxkezJ9XFwuXFxkezN9WiQvKTtcbiAgICBleHBlY3QobmV3IERhdGUobm93KSkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gIH0pO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNb2NrIE1DUCBTZXJ2ZXIgVGVzdHNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRlc2NyaWJlKCdNb2NrIE1DUCBTZXJ2ZXIgU3RydWN0dXJlJywgKCkgPT4ge1xuICBpbnRlcmZhY2UgTW9ja1Rvb2wge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIHNjaGVtYTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICBoYW5kbGVyOiAoYXJnczogYW55KSA9PiBQcm9taXNlPGFueT47XG4gIH1cblxuICBjb25zdCBtb2NrVG9vbHM6IE1vY2tUb29sW10gPSBbXG4gICAge1xuICAgICAgbmFtZTogJ2VjaG8nLFxuICAgICAgZGVzY3JpcHRpb246ICdFY2hvIGJhY2sgYSBtZXNzYWdlJyxcbiAgICAgIHNjaGVtYTogeyBtZXNzYWdlOiAnc3RyaW5nJyB9LFxuICAgICAgaGFuZGxlcjogYXN5bmMgKHsgbWVzc2FnZSB9KSA9PiAoeyByZXN1bHQ6IG1lc3NhZ2UgfSksXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYWRkJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkIHR3byBudW1iZXJzJyxcbiAgICAgIHNjaGVtYTogeyBhOiAnbnVtYmVyJywgYjogJ251bWJlcicgfSxcbiAgICAgIGhhbmRsZXI6IGFzeW5jICh7IGEsIGIgfSkgPT4gKHsgcmVzdWx0OiBhICsgYiB9KSxcbiAgICB9LFxuICBdO1xuXG4gIHRlc3QoJ3Nob3VsZCByZWdpc3RlciBhbmQgZXhlY3V0ZSB0b29scycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBlY2hvVG9vbCA9IG1vY2tUb29scy5maW5kKHQgPT4gdC5uYW1lID09PSAnZWNobycpO1xuICAgIGNvbnN0IGFkZFRvb2wgPSBtb2NrVG9vbHMuZmluZCh0ID0+IHQubmFtZSA9PT0gJ2FkZCcpO1xuXG4gICAgZXhwZWN0KGVjaG9Ub29sKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChhZGRUb29sKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgaWYgKGVjaG9Ub29sKSB7XG4gICAgICBjb25zdCBlY2hvUmVzdWx0ID0gYXdhaXQgZWNob1Rvb2wuaGFuZGxlcih7IG1lc3NhZ2U6ICdIZWxsbycgfSk7XG4gICAgICBleHBlY3QoZWNob1Jlc3VsdC5yZXN1bHQpLnRvQmUoJ0hlbGxvJyk7XG4gICAgfVxuXG4gICAgaWYgKGFkZFRvb2wpIHtcbiAgICAgIGNvbnN0IGFkZFJlc3VsdCA9IGF3YWl0IGFkZFRvb2wuaGFuZGxlcih7IGE6IDUsIGI6IDMgfSk7XG4gICAgICBleHBlY3QoYWRkUmVzdWx0LnJlc3VsdCkudG9CZSg4KTtcbiAgICB9XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdG9vbCBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBlcnJvclRvb2w6IE1vY2tUb29sID0ge1xuICAgICAgbmFtZTogJ2Vycm9yX3Rlc3QnLFxuICAgICAgZGVzY3JpcHRpb246ICdUb29sIHRoYXQgdGhyb3dzIGFuIGVycm9yJyxcbiAgICAgIHNjaGVtYToge30sXG4gICAgICBoYW5kbGVyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZW50aW9uYWwgdGVzdCBlcnJvcicpO1xuICAgICAgfSxcbiAgICB9O1xuXG4gICAgbGV0IGNhdWdodEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBlcnJvclRvb2wuaGFuZGxlcih7fSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNhdWdodEVycm9yID0gZXJyb3IgYXMgRXJyb3I7XG4gICAgfVxuXG4gICAgZXhwZWN0KGNhdWdodEVycm9yKS50b0JlSW5zdGFuY2VPZihFcnJvcik7XG4gICAgZXhwZWN0KGNhdWdodEVycm9yPy5tZXNzYWdlKS50b0JlKCdJbnRlbnRpb25hbCB0ZXN0IGVycm9yJyk7XG4gIH0pO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQZXJmb3JtYW5jZSBUZXN0c1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFRlc3RzJywgKCkgPT4ge1xuICB0ZXN0KCdzaG91bGQgZXhlY3V0ZSBxdWlja2x5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICAvLyBTaW11bGF0ZSBzb21lIHdvcmtcbiAgICBjb25zdCBkYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9LCAoXywgaSkgPT4gKHsgaWQ6IGksIHZhbHVlOiBNYXRoLnJhbmRvbSgpIH0pKTtcbiAgICBjb25zdCBmaWx0ZXJlZCA9IGRhdGEuZmlsdGVyKGl0ZW0gPT4gaXRlbS52YWx1ZSA+IDAuNSk7XG4gICAgY29uc3QgbWFwcGVkID0gZmlsdGVyZWQubWFwKGl0ZW0gPT4gKHsgLi4uaXRlbSwgZG91YmxlZDogaXRlbS52YWx1ZSAqIDIgfSkpO1xuICAgIFxuICAgIGNvbnN0IGVsYXBzZWQgPSBEYXRlLm5vdygpIC0gc3RhcnQ7XG4gICAgXG4gICAgZXhwZWN0KGVsYXBzZWQpLnRvQmVMZXNzVGhhbigxMDApOyAvLyBTaG91bGQgYmUgdmVyeSBmYXN0XG4gICAgZXhwZWN0KG1hcHBlZC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICBleHBlY3QobWFwcGVkLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDAwKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY29uY3VycmVudFRhc2tzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgYXN5bmMgKF8sIGkpID0+IHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLnJhbmRvbSgpICogMTApKTtcbiAgICAgIHJldHVybiBgdGFzay0ke2l9YDtcbiAgICB9KTtcblxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoY29uY3VycmVudFRhc2tzKTtcbiAgICBjb25zdCBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuXG4gICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgxMCk7XG4gICAgZXhwZWN0KGVsYXBzZWQpLnRvQmVMZXNzVGhhbigxMDApOyAvLyBTaG91bGQgY29tcGxldGUgcXVpY2tseVxuICAgIGV4cGVjdChyZXN1bHRzKS50b0VxdWFsKGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgZXhwZWN0LnN0cmluZ01hdGNoaW5nKC9edGFzay1cXGQrJC8pXG4gICAgXSkpO1xuICB9KTtcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSW50ZWdyYXRpb24gUmVhZGluZXNzIFRlc3RzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5kZXNjcmliZSgnSW50ZWdyYXRpb24gUmVhZGluZXNzJywgKCkgPT4ge1xuICB0ZXN0KCdzaG91bGQgaGF2ZSByZXF1aXJlZCBOb2RlLmpzIHZlcnNpb24nLCAoKSA9PiB7XG4gICAgY29uc3Qgbm9kZVZlcnNpb24gPSBwcm9jZXNzLnZlcnNpb247XG4gICAgY29uc3QgbWFqb3JWZXJzaW9uID0gcGFyc2VJbnQobm9kZVZlcnNpb24uc2xpY2UoMSkuc3BsaXQoJy4nKVswXSk7XG4gICAgXG4gICAgZXhwZWN0KG1ham9yVmVyc2lvbikudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxOCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCBzdXBwb3J0IG1vZGVybiBKYXZhU2NyaXB0IGZlYXR1cmVzJywgKCkgPT4ge1xuICAgIC8vIFRlc3Qgb3B0aW9uYWwgY2hhaW5pbmdcbiAgICBjb25zdCBvYmogPSB7IGE6IHsgYjogeyBjOiAndmFsdWUnIH0gfSB9O1xuICAgIGV4cGVjdChvYmouYT8uYj8uYykudG9CZSgndmFsdWUnKTtcbiAgICBleHBlY3Qob2JqLmE/LmI/LmQpLnRvQmVVbmRlZmluZWQoKTtcblxuICAgIC8vIFRlc3QgbnVsbGlzaCBjb2FsZXNjaW5nXG4gICAgY29uc3QgbnVsbFZhbHVlID0gbnVsbDtcbiAgICBjb25zdCB1bmRlZmluZWRWYWx1ZSA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCB6ZXJvVmFsdWUgPSAwO1xuICAgIGNvbnN0IGVtcHR5U3RyaW5nID0gJyc7XG5cbiAgICBleHBlY3QobnVsbFZhbHVlID8/ICdkZWZhdWx0JykudG9CZSgnZGVmYXVsdCcpO1xuICAgIGV4cGVjdCh1bmRlZmluZWRWYWx1ZSA/PyAnZGVmYXVsdCcpLnRvQmUoJ2RlZmF1bHQnKTtcbiAgICBleHBlY3QoemVyb1ZhbHVlID8/ICdkZWZhdWx0JykudG9CZSgwKTtcbiAgICBleHBlY3QoZW1wdHlTdHJpbmcgPz8gJ2RlZmF1bHQnKS50b0JlKCcnKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIHN1cHBvcnQgZGVzdHJ1Y3R1cmluZyBhbmQgc3ByZWFkJywgKCkgPT4ge1xuICAgIGNvbnN0IHNvdXJjZSA9IHsgYTogMSwgYjogMiwgYzogMyB9O1xuICAgIGNvbnN0IHsgYSwgLi4ucmVzdCB9ID0gc291cmNlO1xuXG4gICAgZXhwZWN0KGEpLnRvQmUoMSk7XG4gICAgZXhwZWN0KHJlc3QpLnRvRXF1YWwoeyBiOiAyLCBjOiAzIH0pO1xuXG4gICAgY29uc3QgZXh0ZW5kZWQgPSB7IC4uLnNvdXJjZSwgZDogNCB9O1xuICAgIGV4cGVjdChleHRlbmRlZCkudG9FcXVhbCh7IGE6IDEsIGI6IDIsIGM6IDMsIGQ6IDQgfSk7XG4gIH0pO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNb2NrIFNlcnZlciBSZXNwb25zZSBUZXN0c1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZGVzY3JpYmUoJ01vY2sgU2VydmVyIFJlc3BvbnNlcycsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIGZvcm1hdCBNQ1AgcmVzcG9uc2VzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUmVzcG9uc2UgPSB7XG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgdGV4dDogJ0hlbGxvIGZyb20gTUNQIHNlcnZlcicsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmNvbnRlbnQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSkudG9CZSgndGV4dCcpO1xuICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuY29udGVudFswXS50ZXh0KS50b0JlKCdIZWxsbyBmcm9tIE1DUCBzZXJ2ZXInKTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlcnJvciByZXNwb25zZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0Vycm9yUmVzcG9uc2UgPSB7XG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgdGV4dDogJ0FuIGVycm9yIG9jY3VycmVkJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBpc0Vycm9yOiB0cnVlLFxuICAgIH07XG5cbiAgICBleHBlY3QobW9ja0Vycm9yUmVzcG9uc2UuaXNFcnJvcikudG9CZSh0cnVlKTtcbiAgICBleHBlY3QobW9ja0Vycm9yUmVzcG9uc2UuY29udGVudFswXS50ZXh0KS50b0JlKCdBbiBlcnJvciBvY2N1cnJlZCcpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggZGF0YSByZXNwb25zZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgY29tcGxleERhdGEgPSB7XG4gICAgICB1c2VyczogW1xuICAgICAgICB7IGlkOiAxLCBuYW1lOiAnQWxpY2UnLCByb2xlczogWydhZG1pbiddIH0sXG4gICAgICAgIHsgaWQ6IDIsIG5hbWU6ICdCb2InLCByb2xlczogWyd1c2VyJ10gfSxcbiAgICAgIF0sXG4gICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIHRvdGFsOiAyLFxuICAgICAgICBoYXNNb3JlOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tSZXNwb25zZSA9IHtcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICB0ZXh0OiBKU09OLnN0cmluZ2lmeShjb21wbGV4RGF0YSwgbnVsbCwgMiksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH07XG5cbiAgICBjb25zdCBwYXJzZWRDb250ZW50ID0gSlNPTi5wYXJzZShtb2NrUmVzcG9uc2UuY29udGVudFswXS50ZXh0KTtcbiAgICBcbiAgICBleHBlY3QocGFyc2VkQ29udGVudC51c2VycykudG9IYXZlTGVuZ3RoKDIpO1xuICAgIGV4cGVjdChwYXJzZWRDb250ZW50LnVzZXJzWzBdLm5hbWUpLnRvQmUoJ0FsaWNlJyk7XG4gICAgZXhwZWN0KHBhcnNlZENvbnRlbnQucGFnaW5hdGlvbi50b3RhbCkudG9CZSgyKTtcbiAgfSk7XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVudmlyb25tZW50IGFuZCBDb25maWd1cmF0aW9uIFRlc3RzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5kZXNjcmliZSgnRW52aXJvbm1lbnQgQ29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcblxuICBhZnRlckFsbCgoKSA9PiB7XG4gICAgcHJvY2Vzcy5lbnYgPSBvcmlnaW5hbEVudjtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMnLCAoKSA9PiB7XG4gICAgcHJvY2Vzcy5lbnYuVEVTVF9WQVIgPSAndGVzdF92YWx1ZSc7XG4gICAgXG4gICAgZXhwZWN0KHByb2Nlc3MuZW52LlRFU1RfVkFSKS50b0JlKCd0ZXN0X3ZhbHVlJyk7XG4gICAgZXhwZWN0KHByb2Nlc3MuZW52Lk5PTkVYSVNURU5UX1ZBUikudG9CZVVuZGVmaW5lZCgpO1xuICB9KTtcblxuICB0ZXN0KCdzaG91bGQgZGV0ZWN0IGVudmlyb25tZW50IHR5cGUnLCAoKSA9PiB7XG4gICAgLy8gVGVzdCBOT0RFX0VOViBkZXRlY3Rpb25cbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcbiAgICBleHBlY3QocHJvY2Vzcy5lbnYuTk9ERV9FTlYpLnRvQmUoJ3Rlc3QnKTtcbiAgICBcbiAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG4gICAgY29uc3QgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbiAgICBjb25zdCBpc1Rlc3QgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnO1xuICAgIFxuICAgIGV4cGVjdChpc0RldmVsb3BtZW50KS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNQcm9kdWN0aW9uKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QoaXNUZXN0KS50b0JlKHRydWUpO1xuICB9KTtcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUmVzb3VyY2UgTWFuYWdlbWVudCBUZXN0c1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZGVzY3JpYmUoJ1Jlc291cmNlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gIHRlc3QoJ3Nob3VsZCBtYW5hZ2UgbWVtb3J5IGVmZmljaWVudGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxNZW1vcnkgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHNvbWUgZGF0YVxuICAgIGNvbnN0IGxhcmdlQXJyYXkgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgIGlkOiBpLFxuICAgICAgZGF0YTogYGl0ZW0tJHtpfWAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KSk7XG5cbiAgICBleHBlY3QobGFyZ2VBcnJheSkudG9IYXZlTGVuZ3RoKDEwMDAwKTtcbiAgICBcbiAgICAvLyBNZW1vcnkgc2hvdWxkIG5vdCBiZSBleGNlc3NpdmVcbiAgICBjb25zdCBjdXJyZW50TWVtb3J5ID0gcHJvY2Vzcy5tZW1vcnlVc2FnZSgpO1xuICAgIGNvbnN0IGhlYXBEaWZmID0gY3VycmVudE1lbW9yeS5oZWFwVXNlZCAtIGluaXRpYWxNZW1vcnkuaGVhcFVzZWQ7XG4gICAgXG4gICAgLy8gU2hvdWxkIHVzZSBsZXNzIHRoYW4gNTBNQiBmb3IgdGhpcyB0ZXN0IGRhdGFcbiAgICBleHBlY3QoaGVhcERpZmYpLnRvQmVMZXNzVGhhbig1MCAqIDEwMjQgKiAxMDI0KTtcbiAgfSk7XG5cbiAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjbGVhbnVwIHByb3Blcmx5JywgKCkgPT4ge1xuICAgIGxldCBjbGVhbnVwQ2FsbGVkID0gZmFsc2U7XG4gICAgXG4gICAgY29uc3QgbW9ja0NsZWFudXAgPSAoKSA9PiB7XG4gICAgICBjbGVhbnVwQ2FsbGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLy8gU2ltdWxhdGUgcmVzb3VyY2UgYWxsb2NhdGlvbiBhbmQgY2xlYW51cFxuICAgIGNvbnN0IHJlc291cmNlID0geyBjbGVhbnVwOiBtb2NrQ2xlYW51cCB9O1xuICAgIHJlc291cmNlLmNsZWFudXAoKTtcbiAgICBcbiAgICBleHBlY3QoY2xlYW51cENhbGxlZCkudG9CZSh0cnVlKTtcbiAgfSk7XG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFN5c3RlbSBJbmZvcm1hdGlvbiBUZXN0c1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZGVzY3JpYmUoJ1N5c3RlbSBJbmZvcm1hdGlvbicsICgpID0+IHtcbiAgdGVzdCgnc2hvdWxkIHByb3ZpZGUgc3lzdGVtIGRldGFpbHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KHByb2Nlc3MucGxhdGZvcm0pLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHByb2Nlc3MuYXJjaCkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QocHJvY2Vzcy52ZXJzaW9uKS50b01hdGNoKC9edlxcZCtcXC5cXGQrXFwuXFxkKy8pO1xuICAgIGV4cGVjdChwcm9jZXNzLnVwdGltZSgpKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ3Nob3VsZCB0cmFjayB0aW1pbmcgYWNjdXJhdGVseScsICgpID0+IHtcbiAgICBjb25zdCBzdGFydCA9IHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpO1xuICAgIFxuICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBtZWFzdXJhYmxlIHRpbWUgZGlmZmVyZW5jZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwMDsgaSsrKSB7XG4gICAgICBNYXRoLnJhbmRvbSgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBlbmQgPSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IE51bWJlcihlbmQgLSBzdGFydCkgLyAxMDAwMDAwOyAvLyBDb252ZXJ0IHRvIG1pbGxpc2Vjb25kc1xuICAgIFxuICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMCk7IC8vIFNob3VsZCBiZSB2ZXJ5IGZhc3RcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=